# å­¦ä¹ è·¯å¾„å¯¹æ¯”ï¼šåŸç‰ˆ vs å®˜æ–¹æ¶æ„ç‰ˆ

## ğŸ“Š æ ¸å¿ƒå·®å¼‚å¯¹æ¯”

| æ–¹é¢ | åŸå­¦ä¹ è·¯å¾„ | åŸºäºå®˜æ–¹æ¶æ„çš„æ”¹è¿›è·¯å¾„ |
|------|------------|----------------------|
| **æ¶æ„ç†è§£** | è‡ªå·±çŒœæµ‹çš„ç®€åŒ–æ¶æ„ | åŸºäºçœŸå®çš„ LangChain.js åŒ…ç»“æ„ |
| **æ ¸å¿ƒé‡ç‚¹** | Runnable + Lambda + Sequence | **@langchain/core** + **LCEL** + å›è°ƒç³»ç»Ÿ |
| **åŒ…ç»“æ„** | å•ä¸€åŒ…å‡è®¾ | æ¨¡å—åŒ–å¤šåŒ…ç”Ÿæ€ç³»ç»Ÿ |
| **ç»„åˆæ–¹å¼** | `.pipe()` æ–¹æ³• | **LCEL ç®¡é“æ“ä½œç¬¦ `|`** |
| **é›†æˆå­¦ä¹ ** | æœ€åé˜¶æ®µæ‰æ¶‰åŠ | ä»ç¬¬ä¸‰é˜¶æ®µå¼€å§‹çœŸå®é›†æˆ |
| **ç¯å¢ƒæ”¯æŒ** | åªè€ƒè™‘ Node.js | **å¤šç¯å¢ƒ**ï¼šBrowser, Cloudflare Workers, Vercel Edge |
| **ç›‘æ§è°ƒè¯•** | åŸºç¡€é”™è¯¯å¤„ç† | **LangSmith é›†æˆ**å’Œå®Œæ•´å›è°ƒç³»ç»Ÿ |

---

## ğŸ” è¯¦ç»†å·®å¼‚åˆ†æ

### 1. æ¶æ„ç†è§£çš„å·®å¼‚

#### åŸç‰ˆç†è§£ï¼ˆç®€åŒ–ç‰ˆï¼‰
```
å•ä¸€ simple-langchain åŒ…
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ runnable.ts
â”‚   â”œâ”€â”€ lambda.ts
â”‚   â””â”€â”€ sequence.ts
```

#### å®˜æ–¹å®é™…æ¶æ„
```
@langchain/core (åŸºç¡€æŠ½è±¡)
â”œâ”€â”€ langchain (é«˜çº§ç»„ä»¶)
â”œâ”€â”€ @langchain/openai (OpenAIé›†æˆ)
â”œâ”€â”€ @langchain/anthropic (Anthropicé›†æˆ)
â””â”€â”€ @langchain/community (ç¤¾åŒºé›†æˆ)
```

**å½±å“**ï¼šåŸç‰ˆä¼šè®©ä½ è¯¯è§£ LangChain.js çš„çœŸå®å¤æ‚æ€§å’Œè®¾è®¡å“²å­¦ã€‚

### 2. LCEL (LangChain Expression Language) çš„é‡è¦æ€§

#### åŸç‰ˆè®¤çŸ¥
```typescript
// åªå…³æ³¨ pipe æ–¹æ³•
const chain = step1.pipe(step2).pipe(step3);
```

#### å®˜æ–¹å®é™…ç”¨æ³•
```typescript
// LCEL çš„å¼ºå¤§ç»„åˆèƒ½åŠ›
const chain = prompt | llm | parser;

// å¹¶è¡Œç»„åˆ
const parallel = {
  summary: summaryChain,
  translation: translationChain
};

// æ¡ä»¶åˆ†æ”¯
const conditional = RunnableBranch.from([
  [condition, chain1],
  [otherCondition, chain2],
  defaultChain
]);
```

**å·®å¼‚**ï¼šå®˜æ–¹çš„ LCEL æ¯”ç®€å•çš„ pipe æ–¹æ³•å¼ºå¤§å¾—å¤šï¼Œæ”¯æŒå¤šç§ç»„åˆæ¨¡å¼ã€‚

### 3. å­¦ä¹ é‡ç‚¹çš„å·®å¼‚

#### åŸç‰ˆé‡ç‚¹åˆ†é…
- ğŸŸ¢ 40% - åŸºç¡€ Runnable ç†è§£
- ğŸŸ¡ 30% - ç»„åˆå’Œåºåˆ—
- ğŸ”µ 20% - AI åº”ç”¨ç»„ä»¶
- ğŸš€ 10% - é«˜çº§ç‰¹æ€§

#### æ”¹è¿›ç‰ˆé‡ç‚¹åˆ†é…
- ğŸŸ¢ 35% - **@langchain/core æ·±åº¦ç†è§£**
- ğŸŸ¡ 25% - **å®˜æ–¹é«˜çº§ç»„ä»¶**
- ğŸ”µ 25% - **çœŸå®é›†æˆå’Œå¤šç¯å¢ƒ**
- ğŸš€ 15% - **ç”Ÿäº§çº§åº”ç”¨å’Œç›‘æ§**

### 4. å®é™…åº”ç”¨èƒ½åŠ›å·®å¼‚

#### åŸç‰ˆæœ€ç»ˆèƒ½åŠ›
```typescript
// ç®€åŒ–çš„é“¾å¼è°ƒç”¨
const pipeline = promptTemplate
  .pipe(llm)
  .pipe(outputParser);
```

#### æ”¹è¿›ç‰ˆæœ€ç»ˆèƒ½åŠ›
```typescript
// ä¼ä¸šçº§ RAG åº”ç”¨
import { ChatOpenAI } from "@langchain/openai";
import { PineconeStore } from "@langchain/community/vectorstores/pinecone";

const ragChain = RunnableSequence.from([
  {
    context: retriever.pipe(formatDocs),
    question: RunnablePassthrough.assign({}),
  },
  promptTemplate,
  new ChatOpenAI({ callbacks: [langSmithHandler] }),
  new StringOutputParser(),
]);
```

---

## ğŸ¯ å­¦ä¹ æ•ˆæœå¯¹æ¯”

### åŸç‰ˆå­¦ä¹ åï¼Œä½ å¯èƒ½ä¼šï¼š
- âœ… ç†è§£ Runnable åŸºæœ¬æ¦‚å¿µ
- âœ… èƒ½å®ç°ç®€å•çš„é“¾å¼è°ƒç”¨
- âŒ ä¸äº†è§£çœŸå®çš„åŒ…ç”Ÿæ€ç³»ç»Ÿ
- âŒ ä¸çŸ¥é“å¦‚ä½•ä¸çœŸå®æœåŠ¡é›†æˆ
- âŒ ç¼ºä¹ç”Ÿäº§ç¯å¢ƒç»éªŒ

### æ”¹è¿›ç‰ˆå­¦ä¹ åï¼Œä½ å°†èƒ½å¤Ÿï¼š
- âœ… æ·±åº¦ç†è§£å®˜æ–¹æ¶æ„è®¾è®¡
- âœ… ç†Ÿç»ƒä½¿ç”¨ LCEL ç»„åˆæ¨¡å¼
- âœ… é›†æˆçœŸå®çš„ LLM å’Œå‘é‡æ•°æ®åº“
- âœ… éƒ¨ç½²åˆ°å¤šç§ç¯å¢ƒ
- âœ… ä½¿ç”¨ LangSmith ç›‘æ§å’Œè°ƒè¯•
- âœ… æ„å»ºç”Ÿäº§çº§ AI åº”ç”¨

---

## ğŸ”„ å­¦ä¹ è·¯å¾„å‡çº§å»ºè®®

### å¦‚æœä½ å·²ç»å¼€å§‹åŸç‰ˆå­¦ä¹ 
1. **ä¿ç•™å·²å­¦å†…å®¹**ï¼šRunnable åŸºç¡€æ¦‚å¿µä»ç„¶æœ‰æ•ˆ
2. **é‡æ–°ç†è§£æ¶æ„**ï¼šå­¦ä¹ çœŸå®çš„åŒ…ç»“æ„
3. **è¡¥å…… LCEL çŸ¥è¯†**ï¼šè¿™æ˜¯å®˜æ–¹æ¨èçš„ç»„åˆæ–¹å¼
4. **å®è·µçœŸå®é›†æˆ**ï¼šä½¿ç”¨å®˜æ–¹é›†æˆåŒ…

### å¦‚æœä½ å°šæœªå¼€å§‹
**å¼ºçƒˆå»ºè®®ç›´æ¥ä½¿ç”¨æ”¹è¿›ç‰ˆå­¦ä¹ è·¯å¾„**ï¼ŒåŸå› ï¼š
- æ›´è´´è¿‘çœŸå®å¼€å‘åœºæ™¯
- å­¦åˆ°çš„æŠ€èƒ½å¯ä»¥ç›´æ¥åº”ç”¨
- é¿å…åæœŸæ¨ç¿»é‡å­¦çš„æˆæœ¬

---

## ğŸ“š å­¦ä¹ èµ„æºå¯¹æ¯”

### åŸç‰ˆä¾èµ–èµ„æº
- LangChain æ¦‚å¿µæ–‡æ¡£
- TypeScript åŸºç¡€æ•™ç¨‹
- è®¾è®¡æ¨¡å¼ä¹¦ç±

### æ”¹è¿›ç‰ˆä¾èµ–èµ„æº
- [LangChain.js å®˜æ–¹æ·±åº¦æ–‡æ¡£](https://deepwiki.com/langchain-ai/langchainjs) â­â­â­â­â­
- [LangChain.js GitHub æºç ](https://github.com/langchain-ai/langchainjs)
- [LCEL å®˜æ–¹æŒ‡å—](https://js.langchain.com/docs/expression_language/)
- [LangSmith ç›‘æ§å¹³å°](https://docs.smith.langchain.com/)
- [å®˜æ–¹ç¤ºä¾‹é›†åˆ](https://github.com/langchain-ai/langchainjs/tree/main/examples)

---

## ğŸ æ€»ç»“

**åŸç‰ˆå­¦ä¹ è·¯å¾„**ï¼šé€‚åˆç†è§£æ¦‚å¿µï¼Œä½†ä¸å®é™…åº”ç”¨æœ‰å·®è·
**æ”¹è¿›ç‰ˆå­¦ä¹ è·¯å¾„**ï¼šç›´æ¥å¯¹æ ‡å®˜æ–¹æ¶æ„ï¼Œå­¦å®Œå³å¯ä¸Šæ‰‹çœŸå®é¡¹ç›®

**æ¨èé€‰æ‹©**ï¼šé™¤éä½ åªæ˜¯æƒ³äº†è§£æ¦‚å¿µï¼Œå¦åˆ™å»ºè®®é€‰æ‹©æ”¹è¿›ç‰ˆè·¯å¾„ã€‚ç°ä»£ AI åº”ç”¨å¼€å‘éœ€è¦çš„æ˜¯èƒ½å¤Ÿå¿«é€Ÿé›†æˆçœŸå®æœåŠ¡çš„èƒ½åŠ›ï¼Œè€Œä¸æ˜¯é‡æ–°å‘æ˜è½®å­ã€‚

**ä¸‹ä¸€æ­¥**ï¼šé€‰æ‹©æ”¹è¿›ç‰ˆè·¯å¾„ï¼Œä» `@langchain/core` å¼€å§‹ï¼Œé€æ­¥æ„å»ºä½ çš„ LangChain.js ä¸“ä¸šæŠ€èƒ½ï¼ 